
CC = g++
CFLAGS += -O3
CFLAGS += -Wall 
CPPFLAGS = CFLAGS
LIBS += -lm -lgsl -lgslcblas  
OBJS = control.o fpmath.o model.o sfa.o files.o

SRCS = fp.cpp control.cpp fpmath.cpp model.cpp sfa.cpp files.cpp

all:  fp $(OBJS)

.cpp.o : ; 	$(CC) $(CFLAGS) -c $<  			

## static link to gsl libs.  		
## note it's crutial to use -static-libgcc instead of static; 
fp: fp.o $(OBJS); $(CC) -static-libgcc $(CFLAGS) $(OBJS) fp.o $(STATICLIBS) $(LIBS) -o sfa	

# the following dependence generated by make showdep	
fp.o: fp.h fpmath.h control.h model.h
control.o:  control.h fpmath.h model.h fp.h
fpmath.o: fpmath.h
model.o: model.h fp.h fpmath.h control.h  
files.o: fpmath.h
sfa.o: model.h control.h files.h

showdep: 	
		@$(CC) -MM $(SRCS)
 
clean: 
		rm -f *.o
		
